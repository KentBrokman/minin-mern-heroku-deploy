{"version":3,"sources":["context/AuthContext.js","components/Navbar.js","hooks/auth.hook.js","hooks/http.hook.js","pages/AuthPage.js","hooks/message.hook.js","pages/CreateUserPage.js","components/LinkCard.js","components/Loader.js","pages/DetailPage.js","components/LinksList.js","pages/LinksPage.js","App.js","routes.js","reportWebVitals.js","index.js"],"names":["noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","Navbar","auth","useContext","history","useHistory","className","id","to","href","onClick","event","preventDefault","push","storageName","useHttp","useState","loading","setLoading","error","setError","request","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","AuthPage","text","window","M","toast","html","email","password","form","setForm","useEffect","changeHandler","target","name","value","registerHandler","loginHandler","placeholder","type","onChange","style","marginRight","disabled","CreateUserPage","link","setLink","updateTextFields","pressHandler","key","from","Authorization","_id","paddingTop","e","onKeyPress","htmlFor","LinkCard","rel","clicks","Date","date","toLocaleDateString","Loader","display","justifyContent","DetailPage","linkId","useParams","getLink","fetchedLink","LinksList","links","length","map","index","LinksPage","setLinks","fetchLinks","fetchedLinks","App","setToken","setUserId","ready","setReady","jwtToken","localStorage","setItem","parse","getItem","removeItem","useAuth","routes","path","exact","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d3f3924c.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\n\r\nfunction noop() {}\r\n\r\nexport const AuthContext = createContext({\r\n    token: null,\r\n    userId: null,\r\n    login: noop,\r\n    logout: noop,\r\n    isAuthenticated: false\r\n})","import {useContext} from 'react'\r\nimport {NavLink, useHistory} from 'react-router-dom'\r\nimport { AuthContext } from '../context/AuthContext'\r\n\r\nexport const Navbar = () => {\r\n    const auth = useContext(AuthContext)\r\n    const history = useHistory()\r\n\r\n    const logoutHandler = (event) => {\r\n        event.preventDefault()\r\n        auth.logout()\r\n        history.push('/')\r\n    }\r\n    return (\r\n        <nav>\r\n            <div className=\"nav-wrapper blue darken-1\">\r\n                <span className=\"brand-logo\">Сокращение ссылок</span>\r\n                <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n                    <li><NavLink to=\"/create\">Создать</NavLink></li>\r\n                    <li><NavLink to=\"/links\">Ccылки</NavLink></li>\r\n                    <li><a href=\"/\" onClick={logoutHandler}>Выйти</a></li>\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n    )\r\n}","import {useState, useEffect, useCallback} from 'react'\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null)\r\n    const [userId, setUserId] = useState(null)\r\n    const [ready, setReady] = useState(false)\r\n\r\n    const login = (jwtToken, id) => {\r\n        setToken(jwtToken)\r\n        setUserId(id)\r\n        \r\n        localStorage.setItem(storageName, JSON.stringify({\r\n            token: jwtToken, userId: id\r\n        }))\r\n    }\r\n    const logout = () => {\r\n        setToken(null)\r\n        setUserId(null)\r\n\r\n        localStorage.removeItem(storageName)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n        if (data && data.token) {\r\n            login(data.token, data.userId)\r\n        }\r\n        setReady(true)\r\n    }, [])\r\n\r\n    return {login, logout, token, userId, ready}\r\n}","import { useState, useCallback } from 'react'\r\n\r\nexport const useHttp = () => {\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(null)\r\n\r\n    const request = \r\n        async (url, method = 'GET', body = null, headers = {}) => {\r\n            setLoading(true)\r\n            try {\r\n                if (body) {\r\n                    body = JSON.stringify(body)\r\n                    headers['Content-Type'] = 'application/json'\r\n                }\r\n                const response = await fetch(url, {method, body, headers})\r\n                const data = await response.json()\r\n\r\n                if(!response.ok) {\r\n                    throw new Error(data.message || 'Что-то пошло не так')\r\n                }\r\n\r\n                setLoading(false)\r\n\r\n                return data\r\n            } catch (e) {\r\n                setLoading(false)\r\n                setError(e.message)\r\n\r\n                // Чтобы обрабатывать в компонентах\r\n                throw e\r\n            }\r\n        }\r\n\r\n    const clearError = () => setError(null)\r\n\r\n    return { loading, request, error, clearError }\r\n}","import React, { useEffect, useState, useContext } from 'react'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useMessage } from '../hooks/message.hook'\r\n\r\nexport const AuthPage = () => {\r\n    const auth = useContext(AuthContext)\r\n    const message = useMessage()\r\n    const { loading, request, error, clearError } = useHttp()\r\n    const [form, setForm] = useState({\r\n        email: '',\r\n        password: ''\r\n    })\r\n    useEffect(() => {\r\n        message(error)\r\n        clearError()\r\n    }, [error])\r\n    const changeHandler = event => {\r\n        setForm({ ...form, [event.target.name]: event.target.value })\r\n    }\r\n    const registerHandler = async () => {\r\n        try {\r\n            const data = await request('/api/auth/register', 'POST', { ...form })\r\n            message(data.message)\r\n        } catch (e) {\r\n        \r\n        }\r\n    }\r\n    const loginHandler = async () => {\r\n        try {\r\n            const data = await request('/api/auth/login', 'POST', { ...form })\r\n            auth.login(data.token, data.userId)\r\n        } catch (e) {\r\n        \r\n        }\r\n    }\r\n    return (\r\n        <div className='row'>\r\n            <div className='col s6 offset-s3'>\r\n                <h1>Сократи ссылку</h1>\r\n                <div className=\"card blue darken-1\">\r\n                    <div className=\"card-content white-text\">\r\n                        <span className=\"card-title\">Авторизация</span>\r\n                        <div>\r\n                            <div className=\"input-field\">\r\n                                <input\r\n                                    placeholder=\"Введите email\"\r\n                                    id=\"email\"\r\n                                    type=\"text\"\r\n                                    name='email'\r\n                                    className='yellow-input'\r\n                                    value={form.email}\r\n                                    onChange={changeHandler}\r\n                                />\r\n                                {/* <label htmlFor=\"email\">Email</label> */}\r\n                            </div>\r\n                            <div className=\"input-field\">\r\n                                <input\r\n                                    placeholder=\"Введите пароль\"\r\n                                    id=\"password\"\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    className='yellow-input'\r\n                                    value={form.password}\r\n                                    onChange={changeHandler}\r\n                                />\r\n                                {/* <label htmlFor=\"email\">Email</label> */}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"card-action\">\r\n                        <button\r\n                            className='btn yellow darken-4'\r\n                            style={{ marginRight: 10 }}\r\n                            onClick={loginHandler}\r\n                        >\r\n                            Войти\r\n                        </button>\r\n                        <button\r\n                            className='btn grey lighten-1 black-text'\r\n                            onClick={registerHandler}\r\n                            disabled={loading}\r\n                        >\r\n                            Регистрация\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {useCallback} from 'react'\r\n\r\nexport const useMessage = () => {\r\n    \r\n    return  (text) => {\r\n            if (window.M && text) {\r\n                window.M.toast({html: text})\r\n            }\r\n        }\r\n}","import React, { useState, useEffect, useContext } from 'react'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport {useHistory} from 'react-router-dom'\r\n\r\nexport const CreateUserPage = () => {\r\n    const [link, setLink] = useState('')\r\n    const { request } = useHttp()\r\n    const auth = useContext(AuthContext)\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        window.M.updateTextFields()                  //Просто делает текстовые инпуты активными (materialize)\r\n    }, [])\r\n\r\n    const pressHandler = async (event) => {\r\n        if (event.key === 'Enter') {\r\n            try {\r\n                const data = await request(\r\n                    '/api/link/generate',\r\n                    'POST',\r\n                    { from: link },\r\n                    {Authorization: `Bearer ${auth.token}`}\r\n                )\r\n                history.push(`/detail/${data.link._id}`)\r\n            } catch (error) {\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s8 offset-s2\" style={{ paddingTop: '2rem' }}>\r\n                <div className=\"input-field\">\r\n                    <input\r\n                        placeholder=\"Вставьте ссылку\"\r\n                        id=\"link\"\r\n                        type=\"text\"\r\n                        value={link}\r\n                        onChange={(e) => setLink(e.target.value)}\r\n                        onKeyPress={pressHandler}                          // Срабатывает при нажатии enter\r\n                    />\r\n                    <label htmlFor=\"link\">Вставьте ссылку</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","\r\nexport const LinkCard = ({link}) => {\r\n    return (\r\n        <>\r\n            <h2>Ссылка</h2>\r\n\r\n            <p>Ваша ссылка: <a href={link.to} target=\"_blank\" rel=\"noopener noreferrer\">{link.to}</a></p>\r\n            <p>Откуда: <a href={link.from} target=\"_blank\" rel=\"noopener noreferrer\">{link.from}</a></p>\r\n            <p>Количество кликов по ссылке: <strong>{link.clicks}</strong></p>\r\n            <p>Дата создания: <strong>{new Date(link.date).toLocaleDateString()}</strong></p>\r\n        </>\r\n    )\r\n}","\r\n\r\nexport const Loader = () => {\r\n    return (\r\n        <div style={{ display: 'flex', justifyContent: 'center', paddingTop: '2rem' }}>\r\n            <div className=\"preloader-wrapper big active\">\r\n                <div className=\"spinner-layer spinner-blue-only\">\r\n                    <div className=\"circle-clipper left\">\r\n                        <div className=\"circle\"></div>\r\n                    </div><div className=\"gap-patch\">\r\n                        <div className=\"circle\"></div>\r\n                    </div><div className=\"circle-clipper right\">\r\n                        <div className=\"circle\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}","import React, {useContext, useEffect, useState} from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport { LinkCard } from '../components/LinkCard'\r\nimport { Loader } from '../components/Loader'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\n\r\nexport const DetailPage = () => {\r\n    const [link, setLink] = useState(null)\r\n    const linkId = useParams().id\r\n    const {token} = useContext(AuthContext)\r\n    const {request, loading} = useHttp()\r\n\r\n    const getLink = async () => {\r\n        try {\r\n            const fetchedLink = await request(\r\n                `/api/link/${linkId}`,\r\n                'GET',\r\n                null,\r\n                {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            )\r\n            setLink(fetchedLink)\r\n        } catch (e) {\r\n            \r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getLink()\r\n    }, [])\r\n\r\n    if (loading) {\r\n        return (\r\n            <Loader />\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {!loading && link && <LinkCard link={link}/>}\r\n        </>\r\n    )\r\n}","import { Link } from 'react-router-dom'\r\n\r\nexport const LinksList = ({ links }) => {\r\n\r\n    if (!links.length) {\r\n        return <p className=\"center\">Ссылок пока нет</p>\r\n    }\r\n    debugger\r\n    return (\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>№</th>\r\n                    <th>Оригинальная</th>\r\n                    <th>Сокращенная</th>\r\n                    <th>Открыть</th>\r\n                </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n                {links.map((link, index) => {\r\n                    return (\r\n                        <tr key={link._id}>\r\n                            <td>{index + 1}</td>\r\n                            <td>{link.from}</td>\r\n                            <td>{link.to}</td>\r\n                            <td>\r\n                                <Link to={`/detail/${link._id}`}>Открыть</Link>\r\n                            </td>\r\n                        </tr>\r\n                    )\r\n                })}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\nimport { LinksList } from '../components/LinksList'\r\nimport { Loader } from '../components/Loader'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\n\r\nexport const LinksPage = () => {\r\n    const [links, setLinks] = useState([])\r\n    const {loading, request} = useHttp()\r\n    const {token} = useContext(AuthContext)\r\n\r\n    const fetchLinks = async () => {\r\n        try {\r\n            const fetchedLinks = await request(\r\n                '/api/link',\r\n                'GET',\r\n                null,\r\n                {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            )\r\n            setLinks(fetchedLinks)\r\n        } catch (e) {\r\n            \r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchLinks()\r\n    }, [])\r\n\r\n    if (loading) {\r\n        return (\r\n            <Loader />\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {!loading && <LinksList links={links} />}\r\n        </>\r\n    )\r\n}","import 'materialize-css'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport { Navbar } from './components/Navbar';\r\nimport { AuthContext } from './context/AuthContext';\r\nimport { useAuth } from './hooks/auth.hook';\r\nimport { useRoutes } from './routes';\r\nimport {Loader} from './components/Loader'\r\n\r\nfunction App() {\r\n  const { login, logout, token, userId, ready } = useAuth()\r\n  const isAuthenticated = !!token\r\n  const routes = useRoutes(isAuthenticated)\r\n\r\n  if (!ready) {\r\n    return <Loader />\r\n  }\r\n  return (\r\n    <AuthContext.Provider value={{\r\n      token, login, logout, userId, isAuthenticated\r\n    }}>\r\n      <BrowserRouter>\r\n        {isAuthenticated && <Navbar />}\r\n        <div className='container'>\r\n          {routes}\r\n        </div>\r\n      </BrowserRouter>\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import {Switch, Route, Redirect} from 'react-router-dom'\r\nimport { AuthPage } from './pages/AuthPage'\r\nimport { CreateUserPage } from './pages/CreateUserPage'\r\nimport { DetailPage } from './pages/DetailPage'\r\nimport { LinksPage } from './pages/LinksPage'\r\n\r\n\r\nexport const useRoutes = (isAthenticated) => {\r\n    if (isAthenticated) {\r\n        return (\r\n            <Switch>\r\n                <Route path='/links' exact>\r\n                    <LinksPage />\r\n                </Route>\r\n                <Route path='/create' exact>\r\n                    <CreateUserPage />\r\n                </Route>\r\n                <Route path='/detail/:id'>\r\n                    <DetailPage />\r\n                </Route>\r\n                <Redirect to='/create' />\r\n            </Switch>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Switch>\r\n            <Route path='/' exact>\r\n                <AuthPage />\r\n            </Route>\r\n            <Redirect to='/' />\r\n        </Switch>\r\n    )\r\n}","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  // <React.StrictMode>\r\n    <App />,\r\n  // </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}